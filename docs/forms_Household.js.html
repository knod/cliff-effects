<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: forms/Household.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: forms/Household.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// REACT COMPONENTS
import React from 'react';
import {
  Button,
  Form,
  Dropdown,
  Header,
  Checkbox,
  Icon,
} from 'semantic-ui-react';

// PROJECT COMPONENTS
import { FormPartsContainer } from './FormPartsContainer';
import { ColumnHeading } from '../components/headings';
import { ManagedNumberField } from './inputs';

// COMPONENT HELPER FUNCTIONS
import {
  isNonNegWholeNumber,
  hasOnlyNonNegWholeNumberChars,
} from '../utils/validators';

// OBJECT MANIPULATION
import { cloneDeep } from 'lodash';


// ======================
// GENERICS
// ======================
// To be able to adjust sizes easily
// Very specific to household size. May be worth creating
// a constructor for columns in general, or maybe use a Grid.
const columnStyle = {
  display:   'inline-block',
  textAlign: 'center',
  marginTop: '0.7em',
  // marginBottom: '0.7em'
};

const Columns = {};

// `noMargin` is a bit hacky, but it'll do for now
Columns.One = function ({ noMargin, children }) {
  var marginTop = columnStyle.marginTop;
  if (noMargin) {
    marginTop = 0;
  }
  return (&lt;div style={{ ...columnStyle, marginTop: marginTop, width: '5em' }}> {children} &lt;/div>);
};

Columns.Two = function ({ noMargin, children }) {
  var marginTop = columnStyle.marginTop;
  if (noMargin) {
    marginTop = 0;
  }
  return (&lt;div style={{ ...columnStyle, marginTop: marginTop, width: '20em', textAlign: 'left', paddingLeft: '1em' }}> {children} &lt;/div>);
};

Columns.Three = function ({ noMargin, children }) {
  var marginTop = columnStyle.marginTop;
  if (noMargin) {
    marginTop = 0;
  }
  return (&lt;div style={{ ...columnStyle, marginTop: marginTop, width: '5em' }}> {children} &lt;/div>);
};

Columns.Four = function ({ noMargin, children }) {
  var marginTop = columnStyle.marginTop;
  if (noMargin) {
    marginTop = 0;
  }
  return (&lt;div style={{ ...columnStyle, marginTop: marginTop, width: '10em' }}> {children} &lt;/div>);
};


/** @todo description
*
* @function
* @param {object} props
* @property {object} props.__ - explanation
*
* @returns Component
*/
const ColumnHeader = function ({ children, columnNum }) {

  var Container = Columns[ columnNum ];

  return (
    &lt;Container>
      &lt;ColumnHeading
        type={ 'household' }
        colName={ '' }>
        { children }
      &lt;/ColumnHeading>
    &lt;/Container>
  );

};


/** @todo description
*
* @function
* @param {object} props
* @property {object} props.__ - explanation
*
* @returns Component
*/
const MemberButton = function ({ basic, color, iconName, className, onClick }) {

  color = color || null;

  return (
    &lt;Button
      type={ 'button' }
      basic={ !!basic }
      color={ color }
      icon={ iconName }
      className={ className }
      onClick={ onClick }
      style={{ padding: '0', height: '2.2em', width: '2.2em' }}
      circular />
  );

};


// ======================
// UNIQUE
// ======================

/** @todo description
*
* @function
* @param {object} props
* @property {object} props.__ - explanation
*
* @returns Component
*/
const Role = function ({ member, setMember, snippets }) {

  var ThisRole  = null,
      margin   = '0';

  if (member.index === 0) {

    ThisRole  = &lt;span>{ snippets.i_headOfHousehold }&lt;/span>;

  } else if (member.index === 1) {

    margin = '-1em';

    var options = [
      { text: snippets.i_spouse, value: 'spouse' },
      { text: snippets.i_childOther, value: 'member' },
    ];

    ThisRole = &lt;Dropdown
      selection
      name={ 'm_role' }
      value={ member.m_role }
      options={ options }
      onChange={ setMember } />;

  } else {

    ThisRole = &lt;span>{ snippets.i_childOther }&lt;/span>;

  }

  // Styles will have to be adjusted.
  return (
    &lt;div style={{ display: 'inline-block', width: '100%', textAlign: 'left', marginLeft: margin }}>
      { ThisRole }
    &lt;/div>
  );

};  // End Role(&lt;>)


/** @todo description
*
* @function
* @param {object} props
* @property {object} props.__ - explanation
*
* @returns Component
*/
const MemberField = function ({ household, time, setHousehold, updateClientValue, snippets }, indx) {

  var member      = household[ indx ],
      routeStart  = 'household/' + indx + '/';
  member.index    = indx;  // Just needed as member prop in this file


  var onMemberChange = function (evnt, inputProps) {
    var route = routeStart + inputProps.name;
    var data  = { route: route, value: inputProps.value };
    updateClientValue(evnt, data);
  };


  var onMemberChecked = function (evnt, inputProps) {
    var route = routeStart + inputProps.name;
    var data  = { route: route, value: inputProps.checked };
    updateClientValue(evnt, data);
  };


  var removeMember = function (evnt, inputProps) {
    household.splice(indx, 1);
    setHousehold(evnt, household);
  };  // End removeMember()


  // The font size thing is a bit weird, but... later
  return (
    &lt;Form.Field
      className='flex-item'
      key={ indx }>

      &lt;Columns.One>
        { indx > 0 ? (
          &lt;MemberButton
            className={ 'remove' }
            onClick={ removeMember }
            iconName={ 'remove' } />
        ) : (
          &lt;span>
            { household.length > 1 ? (
              &lt;Icon
                fitted
                name={ 'ban' }
                style={{ color: '#cfcfd0', fontSize: '2.2em', verticalAlign: 'text-top' }} />
            ) : (
              null
            ) }
          &lt;/span>
        ) }
      &lt;/Columns.One>

      &lt;Columns.Two>
        &lt;Role
          member={ member }
          setMember={ onMemberChange }
          snippets={ snippets } />
      &lt;/Columns.Two>

      &lt;Columns.Three>
        &lt;ManagedNumberField
          value            = { member.m_age }
          name             = { 'm_age' }
          className        = { time + ' member-age ' + time }
          displayValidator = { hasOnlyNonNegWholeNumberChars }
          storeValidator   = { isNonNegWholeNumber }
          format           = { function (value) { return value; } }
          store            = { onMemberChange }
          onBlur           = { function () { return true; } } />
      &lt;/Columns.Three>

      &lt;Columns.Four>
        &lt;Checkbox
          name={ 'm_disabled' }
          checked={ member.m_disabled }
          onChange={ onMemberChecked } />
      &lt;/Columns.Four>

    &lt;/Form.Field>
  );

};  // End MemberField()


/** @todo description
*
* @function
* @param {object} props
* @property {object} props.__ - explanation
*
* @returns Component
*/
const getMembers = function (current, time, setHousehold, updateClientValue, snippets) {

  var household = current.household,
      props     = {
        household:         household,
        time:              time,
        setHousehold:      setHousehold,
        updateClientValue: updateClientValue,
        snippets:          snippets,
      };

  var mems = [];
  for (let memi = 0; memi &lt; household.length; memi++) {
    mems.push(MemberField(props, memi));
  };

  return mems;

};  // End getMembers()


/** @todo description
*
* @todo Could this be a number field? If not, then a dropdown?
*
* @function
* @param {object} props
* @property {object} props.__ - explanation
*
* @returns Component
*/
const HouseholdContent = function ({ current, time, updateClientValue, snippets }) {

  // Don't mutate state properties
  var household = cloneDeep(current.household);


  var setHousehold = function (evnt, newHousehold) {

    var obj = {
      route: 'household',
      value: newHousehold,
    };

    updateClientValue(evnt, obj);

  };  // End setHousehold()


  var addMember = function (evnt, inputProps) {

    var member;
    if (household.length === 1) {
      member = { m_age: 30, m_role: 'spouse', m_disabled: false };
    } else {
      member = { m_age: 12, m_role: 'member', m_disabled: false };
    }

    household.push(member);
    setHousehold(evnt, household);

  };  // End addMember()


  return (
    &lt;div className='field-aligner two-column'>
      &lt;div style={{ marginBottom: '.5em' }}>
        &lt;ColumnHeader columnNum='One' />
        &lt;ColumnHeader columnNum='Two'> { snippets.i_role }&lt;/ColumnHeader>
        &lt;ColumnHeader columnNum='Three'>{ snippets.i_age }&lt;/ColumnHeader>
        &lt;ColumnHeader columnNum='Four'>{ snippets.i_disabled }&lt;/ColumnHeader>
      &lt;/div>

      { getMembers(current, time, setHousehold, updateClientValue, snippets) }

      &lt;Button
        type={ 'button' }
        id={ 'addMember' }
        basic
        onClick={ addMember }>
        &lt;Columns.One noMargin={ true }>
          &lt;Icon
            name={ 'plus' }
            circular
            inverted
            color={ 'teal' } />
        &lt;/Columns.One>

        &lt;Columns.Two noMargin={ true }>
          &lt;Header
            as='h4'
            color={ 'teal' }>
            { snippets.i_addMember }
          &lt;/Header>
        &lt;/Columns.Two>

        &lt;Columns.Three noMargin={ true } />
        &lt;Columns.Four noMargin={ true } />
      &lt;/Button>

    &lt;/div>
  );

};  // End HouseholdContent()


/** @todo description
*
* @function
* @param {object} props
* @property {object} props.__ - explanation
*
* @returns Component
*/
// `props` is a cloned version of the original props. References broken.
const HouseholdStep = function ({ updateClientValue, navData, client, snippets }) {

  return (
    &lt;FormPartsContainer
      title     = { snippets.i_title }
      clarifier = { snippets.i_clarifier }
      navData   = { navData }
      formClass = { `household` }>
      &lt;HouseholdContent
        updateClientValue = { updateClientValue }
        current={ client.current }
        time={ 'current' }
        snippets={ snippets } />
    &lt;/FormPartsContainer>
  );

};  // End HouseholdStep()

export { HouseholdStep };
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-cashflow.html">cashflow</a></li></ul><h3>Classes</h3><ul><li><a href="AskPermission.html">AskPermission</a></li><li><a href="BrowserLeaveListener.html">BrowserLeaveListener</a></li><li><a href="CashFlowInputsRow.html">CashFlowInputsRow</a></li><li><a href="Confirmer.html">Confirmer</a></li><li><a href="CustomClient.html">CustomClient</a></li><li><a href="ErrorListener.html">ErrorListener</a></li><li><a href="FeedbackPrompt.html">FeedbackPrompt</a></li><li><a href="HeadingWithDetail.html">HeadingWithDetail</a></li><li><a href="ManagedNumberField.html">ManagedNumberField</a></li><li><a href="ReactRouterLeaveListener.html">ReactRouterLeaveListener</a></li><li><a href="RowWithDetail.html">RowWithDetail</a></li><li><a href="ShowOnYes.html">ShowOnYes</a></li><li><a href="VerticalLine.html">VerticalLine</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AboutContent">AboutContent</a></li><li><a href="global.html#applyAndPushBenefits">applyAndPushBenefits</a></li><li><a href="global.html#applySideEffects">applySideEffects</a></li><li><a href="global.html#BigButton">BigButton</a></li><li><a href="global.html#CashFlowContainer">CashFlowContainer</a></li><li><a href="global.html#CLIENT_DEFAULTS">CLIENT_DEFAULTS</a></li><li><a href="global.html#ColumnHeader">ColumnHeader</a></li><li><a href="global.html#ColumnHeading">ColumnHeading</a></li><li><a href="global.html#ContentH1">ContentH1</a></li><li><a href="global.html#ContentSubH1">ContentSubH1</a></li><li><a href="global.html#ControlledRadioYesNo">ControlledRadioYesNo</a></li><li><a href="global.html#convertForUpdate">convertForUpdate</a></li><li><a href="global.html#CurrentBenefitsContent">CurrentBenefitsContent</a></li><li><a href="global.html#CurrentBenefitsStep">CurrentBenefitsStep</a></li><li><a href="global.html#CurrentExpensesStep">CurrentExpensesStep</a></li><li><a href="global.html#CurrentIncomeStep">CurrentIncomeStep</a></li><li><a href="global.html#EarnedFrom">EarnedFrom</a></li><li><a href="global.html#empty">empty</a></li><li><a href="global.html#ExpensesFormContent">ExpensesFormContent</a></li><li><a href="global.html#ExternalLink">ExternalLink</a></li><li><a href="global.html#FormBottomRow">FormBottomRow</a></li><li><a href="global.html#FormPartsContainer">FormPartsContainer</a></li><li><a href="global.html#getBenefitTimeFrames">getBenefitTimeFrames</a></li><li><a href="global.html#getChartData">getChartData</a></li><li><a href="global.html#getEveryMember">getEveryMember</a></li><li><a href="global.html#getEveryMemberOfHousehold">getEveryMemberOfHousehold</a></li><li><a href="global.html#getExtraAmount">getExtraAmount</a></li><li><a href="global.html#getKeyPathsArray">getKeyPathsArray</a></li><li><a href="global.html#getKeyPathStrings">getKeyPathStrings</a></li><li><a href="global.html#getLimitBySize">getLimitBySize</a></li><li><a href="global.html#getMaxIntKey">getMaxIntKey</a></li><li><a href="global.html#getMembers">getMembers</a></li><li><a href="global.html#getSection8Benefit">getSection8Benefit</a></li><li><a href="global.html#getSNAPBenefits">getSNAPBenefits</a></li><li><a href="global.html#getTextForLanguage">getTextForLanguage</a></li><li><a href="global.html#hasOnlyNonNegNumberChars">hasOnlyNonNegNumberChars</a></li><li><a href="global.html#hasOnlyNonNegWholeNumberChars">hasOnlyNonNegWholeNumberChars</a></li><li><a href="global.html#HouseholdContent">HouseholdContent</a></li><li><a href="global.html#HouseholdStep">HouseholdStep</a></li><li><a href="global.html#Housing">Housing</a></li><li><a href="global.html#IncomeForm">IncomeForm</a></li><li><a href="global.html#interpolateSnippets">interpolateSnippets</a></li><li><a href="global.html#interpolateText">interpolateText</a></li><li><a href="global.html#IntervalColumnHeadings">IntervalColumnHeadings</a></li><li><a href="global.html#InvalidMessage">InvalidMessage</a></li><li><a href="global.html#isDependent">isDependent</a></li><li><a href="global.html#isNonNegNumber">isNonNegNumber</a></li><li><a href="global.html#isNonNegWholeNumber">isNonNegWholeNumber</a></li><li><a href="global.html#limit">limit</a></li><li><a href="global.html#maximum_value_yearly">maximum_value_yearly</a></li><li><a href="global.html#MemberButton">MemberButton</a></li><li><a href="global.html#MemberField">MemberField</a></li><li><a href="global.html#mergeCustomizer">mergeCustomizer</a></li><li><a href="global.html#moneyToWholeNum">moneyToWholeNum</a></li><li><a href="global.html#MonthlyCashFlowRow">MonthlyCashFlowRow</a></li><li><a href="global.html#PredictionsStep">PredictionsStep</a></li><li><a href="global.html#RenderIfTrue">RenderIfTrue</a></li><li><a href="global.html#returnSame">returnSame</a></li><li><a href="global.html#Role">Role</a></li><li><a href="global.html#sampleClients">sampleClients</a></li><li><a href="global.html#SpaceHolder">SpaceHolder</a></li><li><a href="global.html#StackedBarGraph">StackedBarGraph</a></li><li><a href="global.html#sum">sum</a></li><li><a href="global.html#toBoolean">toBoolean</a></li><li><a href="global.html#toMoneyStr">toMoneyStr</a></li><li><a href="global.html#toMonthlyFrom">toMonthlyFrom</a></li><li><a href="global.html#toWeeklyFrom">toWeeklyFrom</a></li><li><a href="global.html#toYearlyFrom">toYearlyFrom</a></li><li><a href="global.html#undefinedString">undefinedString</a></li><li><a href="global.html#UNDER13_NON_TRANSPORT_CARE">UNDER13_NON_TRANSPORT_CARE</a></li><li><a href="global.html#UNEARNED_INCOME_SOURCES">UNEARNED_INCOME_SOURCES</a></li><li><a href="global.html#valueFixers">valueFixers</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sun Sep 30 2018 10:27:56 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
